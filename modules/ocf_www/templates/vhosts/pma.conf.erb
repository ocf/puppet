<VirtualHost *:443>
    ServerName pma.ocf.berkeley.edu
    ServerAdmin help@ocf.berkeley.edu

    DocumentRoot /srv/sites/pma

    SSLEngine on
    SSLCertificateFile /etc/ssl/private/<%= @fqdn %>.crt
    SSLCertificateKeyFile /etc/ssl/private/<%= @fqdn %>.key
    SSLCertificateChainFile /etc/ssl/certs/incommon-intermediate.crt
    Include ssl-common.conf

    CustomLog ${APACHE_LOG_DIR}/ssl_access.log combined
    Header set Strict-Transport-Security "max-age=31536000"
</VirtualHost>

# redirect phpmyadmin.o.b.e -> pma.o.b.e
<VirtualHost *:443>
    ServerName phpmyadmin.ocf.berkeley.edu
    ServerAdmin help@ocf.berkeley.edu

    SSLEngine on
    SSLCertificateFile /etc/ssl/private/<%= @fqdn %>.crt
    SSLCertificateKeyFile /etc/ssl/private/<%= @fqdn %>.key
    SSLCertificateChainFile /etc/ssl/certs/incommon-intermediate.crt
    Include ssl-common.conf

    Redirect / https://pma.ocf.berkeley.edu/
</VirtualHost>

<VirtualHost *:80>
    ServerName pma.ocf.berkeley.edu
    ServerAlias pma phpmyadmin.ocf.berkeley.edu phpmyadmin

    Redirect / https://pma.ocf.berkeley.edu/
</VirtualHost>
