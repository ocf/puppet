auto lo
iface lo inet loopback

<%
if @bridge then
    @iface = 'br0'
else
    # TODO: Make this more dynamic! It currently only works on eruption,
    # because the systemd network interface names are based on hardware.
    # (maybe set in /etc/udev/rules.d/ based on the the MAC address in LDAP with
    # a static name for desktops?
    @iface = 'enp3s0'
end
%>

auto <%= @iface %>
iface <%= @iface %> inet static
<% if @bridge -%>
  bridge_ports eth0
  bridge_stp off
  bridge_maxwait 0
<% end -%>
  address <%= @ipaddress %>
  netmask <%= @netmask %>
  gateway <%= @gateway %>

iface <%= @iface %> inet6 static
  address <%= @ipaddress6 %>
  netmask <%= @netmask6 %>
  gateway <%= @gateway6 %>
