#!/usr/bin/env python3
import pwd
import subprocess
from datetime import datetime

from gi.repository import Notify
from ocflib.account.utils import is_staff
from ocflib.lab.stats import staff_in_lab


NOTIFICATION_ICON = '/opt/share/xsession/images/ocf-color.png'

PAPER_PATH = '/opt/share/utils/bin/paper'


def main():
    Notify.init('OCF')

    staff = {
        pwd.getpwnam(session.user).pw_gecos
        for session in staff_in_lab()
        if not is_staff(session.user, 'opstaff')
    }

    # List staff in lab
    if staff:
        Notify.Notification.new(
            'Staff in lab',
            '\n'.join(staff),
            NOTIFICATION_ICON,
        ).show()


if __name__ == '__main__':
    main()
